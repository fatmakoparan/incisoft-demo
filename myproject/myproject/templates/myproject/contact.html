{% extends 'base_generic.html' %}
{% load static %}

{% block title %}Kariyer{% endblock %}

{% block content %}
<!-- Header Section -->
<div class="portfolio_section">
  <div class="portfolio_section_2">
    <div class="row">
      <div class="col-md-12">
        <div class="container_main">
          <img src="{% static 'images/iletisim1.jpg' %}" alt="" class="image">
          <div class="overlay">
            <div class="text">
              <div class="description">
                <p>İletişim</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Contact Form Section -->
<div class="contact_section layout_padding">
  <div class="container">
    <h1 style="text-align: center;">Bize Ulaşın</h1>
    <form method="post" id="contactForm" style="max-width: 600px; margin: 0 auto; padding: 20px;">
      {% csrf_token %}

      <input type="text" id="id_name" name="name" placeholder="Adınız" required minlength="2" maxlength="50"
             style="width: 100%; padding: 10px; margin-bottom: 15px; border: 2px solid #ccc; border-radius: 5px; font-size: 16px;">

      <input type="email" id="id_email" name="email" placeholder="E-posta" required
             style="width: 100%; padding: 10px; margin-bottom: 15px; border: 2px solid #ccc; border-radius: 5px; font-size: 16px;">

      <input type="text" id="id_phone" name="phone" placeholder="Telefon (05XXXXXXXXX)" required minlength="11" maxlength="11"
             style="width: 100%; padding: 10px; margin-bottom: 15px; border: 2px solid #ccc; border-radius: 5px; font-size: 16px;">

      <textarea id="id_message" name="message" placeholder="Mesajınız" rows="5" required minlength="10" maxlength="1000"
                style="width: 100%; padding: 10px; margin-bottom: 15px; border: 2px solid #ccc; border-radius: 5px; font-size: 16px;"></textarea>

      <div style="text-align: center;">
        <button type="submit" id="sendButton" disabled
                style="padding: 10px 20px; background-color: #cccccc; color: white; border: none; border-radius: 5px; cursor: not-allowed; font-size: 16px;"
                onmouseover="if(!this.disabled) this.style.backgroundColor='#004085';"
                onmouseout="if(!this.disabled) this.style.backgroundColor='#0056b3';">
          Gönder
        </button>
      </div>

      {% if success %}
        <p style="color: green; text-align: center; margin-top: 10px;">Mesajınız başarıyla gönderildi!</p>
      {% endif %}
      {% if error %}
        <p style="color: red; text-align: center; margin-top: 10px;">Hata: {{ error }}</p>
      {% endif %}
    </form>
  </div>
</div>

<!-- Validation Script -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
  $(document).ready(function () {
    function checkForm() {
      const name = $('#id_name').val()?.trim() || '';
      const email = $('#id_email').val()?.trim() || '';
      const phone = $('#id_phone').val()?.trim() || '';
      const message = $('#id_message').val()?.trim() || '';

      const emailRegex = /@(gmail\.com|hotmail\.com)$/i;
      const phoneRegex = /^05\d{9}$/;

      if (
        name.length >= 2 && name.length <= 50 &&
        emailRegex.test(email) &&
        phoneRegex.test(phone) &&
        message.length >= 10 && message.length <= 1000
      ) {
        $('#sendButton').prop('disabled', false).css({
          'background-color': '#0056b3',
          'cursor': 'pointer'
        });
      } else {
        $('#sendButton').prop('disabled', true).css({
          'background-color': '#cccccc',
          'cursor': 'not-allowed'
        });
      }
    }

    $('#contactForm input, #contactForm textarea').on('input', checkForm);
    checkForm();
  });
</script>
{% endblock %}
